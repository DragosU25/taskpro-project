"use strict";(self.webpackChunktaskpro_project=self.webpackChunktaskpro_project||[]).push([[443],{5443:(e,a,n)=>{n.r(a),n.d(a,{default:()=>O});var t=n(5043),o=n(6580),r=n(3003),i=n(8369);const d=e=>e.columns.columns,s=e=>e.columns.isLoading,l=e=>e.columns.error,c={column:"ProjectColumns_column__+kO0U",text:"ProjectColumns_text__HvghR",addContainer:"ProjectColumns_addContainer__K3nzj",button:"ProjectColumns_button__LslHO",icon:"ProjectColumns_icon__9ARtZ"};var u=n(5737);const m={cardContainer:"Card_cardContainer__s03Mx",highPriority:"Card_highPriority__V2BsM",mediumPriority:"Card_mediumPriority__PihMH",lowPriority:"Card_lowPriority__jrbRn",priorityCircle:"Card_priorityCircle__7zGsp",high:"Card_high__XfacI",medium:"Card_medium__ZzgRd",low:"Card_low__8GEiw",default:"Card_default__0k8bx",detailsContainer:"Card_detailsContainer__tQzlS",secondContainer:"Card_secondContainer__ziGdE",title:"Card_title__td8Dq",text:"Card_text__9eW7u",container:"Card_container__RZsSe",smallText:"Card_smallText__TsInM",priorityStatus:"Card_priorityStatus__dtwQX",priority:"Card_priority__oWu7w",status:"Card_status__HcXGC",icons:"Card_icons__wug2B"};var _=n(9830),C=n(579);const h=function(e){let{card:a,onEdit:n,onDelete:t,onMove:o}=e;const r="".concat(m.priorityCircle," ").concat(m[a.cardPriority.toLowerCase()]||m.default);return(0,C.jsxs)("div",{className:"".concat(m.cardContainer," ").concat(m["".concat(a.cardPriority.toLowerCase(),"Priority")]||""),children:[(0,C.jsxs)("div",{className:m.detailsContainer,children:[(0,C.jsx)("h4",{className:m.title,children:a.cardName}),(0,C.jsx)("p",{className:m.text,children:a.cardDescription})]}),(0,C.jsxs)("div",{className:m.container,children:[(0,C.jsxs)("div",{className:m.secondContainer,children:[(0,C.jsxs)("div",{className:m.priority,children:[(0,C.jsx)("p",{className:m.smallText,children:"Priority:"}),(0,C.jsxs)("div",{className:m.priorityStatus,children:[(0,C.jsx)("div",{className:r}),(0,C.jsx)("span",{className:m.status,children:a.cardPriority})]})]}),(0,C.jsxs)("div",{className:m.deadline,children:[(0,C.jsx)("p",{className:m.smallText,children:"Deadline:"}),(0,C.jsx)("p",{className:m.status,children:new Date(a.deadlineDate).toLocaleDateString()})]})]}),(0,C.jsxs)("div",{className:m.icons,children:[(0,C.jsx)(_.A,{name:"move",size:16,handlerFunction:()=>o(a)}),(0,C.jsx)(_.A,{name:"edit",size:16,handlerFunction:()=>n(a)}),(0,C.jsx)(_.A,{name:"delete",size:16,handlerFunction:()=>t(a)})]})]})]})},x="CardsList_container__tsRnB";const j=function(e){let{cards:a,onEdit:n,onDelete:t,onMove:o}=e;return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("div",{className:x,children:a.map((e=>(0,C.jsx)(h,{card:e,onEdit:()=>n(e),onDelete:()=>t(e._id),onMove:o},e._id)))})})},p={columnNameContainer:"Column_columnNameContainer__xnkj1",name:"Column_name__n0Gkp",iconContainer:"Column_iconContainer__1iGIa",addContainer:"Column_addContainer__X9y6m",addIconContainer:"Column_addIconContainer__euYja",icon:"Column_icon__Ef0lm",text:"Column_text__rtuyU",button:"Column_button__OQwSW"};var v=n(9379),y=n(6),N=n(3902);const g={title:"CardForm_title__jQe7-",textarea:"CardForm_textarea__vJxPE",priorityContainer:"CardForm_priorityContainer__NlkH0",label:"CardForm_label__uiV3+",priorityOptions:"CardForm_priorityOptions__kFCgX",priorityBubble:"CardForm_priorityBubble__ZG62I",low:"CardForm_low__KYMIv",medium:"CardForm_medium__EPSVG",high:"CardForm_high__JTvQE",without:"CardForm_without__Nc1iU",selected:"CardForm_selected__mfe+4",dateContainer:"CardForm_dateContainer__93ji5",deadlineContainer:"CardForm_deadlineContainer__YW5xq",dateInput:"CardForm_dateInput__xnIdh",button:"CardForm_button__Knqxb",iconContainer:"CardForm_iconContainer__VWiX+",icon:"CardForm_icon__SSn4W",dateButton:"CardForm_dateButton__U1bnt",arrowIcon:"CardForm_arrowIcon__r1T6E"};var b=n(1899),D=n.n(b),A=n(3538);n(5015);const w=e=>{let{columnId:a,handleClose:n,onSubmit:o,card:r}=e;const[i,d]=(0,t.useState)({cardName:(null===r||void 0===r?void 0:r.cardName)||"",cardDescription:(null===r||void 0===r?void 0:r.cardDescription)||"",cardPriority:(null===r||void 0===r?void 0:r.cardPriority)||"Low",deadlineDate:(null===r||void 0===r?void 0:r.cardDeadline)||""}),[s,l]=(0,t.useState)(!1),c=e=>{const{name:a,value:n}=e.target;d((e=>(0,v.A)((0,v.A)({},e),{},{[a]:n})))},u=e=>{d((a=>(0,v.A)((0,v.A)({},a),{},{cardPriority:e})))};return(0,C.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r?console.log("Editing card:",i):console.log("Adding card:",i),o(i),n()},children:[(0,C.jsx)("h2",{className:g.title,children:r?"Edit Card":"Add Card"}),(0,C.jsx)(N.A,{type:"text",name:"cardName",placeholder:"Title",value:i.cardName,handleChange:c,required:!0}),(0,C.jsx)("textarea",{className:g.textarea,name:"cardDescription",placeholder:"Description",value:i.cardDescription,onChange:c,required:!0}),(0,C.jsxs)("div",{className:g.priorityContainer,children:[(0,C.jsx)("label",{className:g.label,children:"Label color"}),(0,C.jsxs)("div",{className:g.priorityOptions,children:[(0,C.jsx)("div",{className:"".concat(g.priorityBubble," ").concat(g.low," ").concat("Low"===i.cardPriority?g.selected:""),onClick:()=>u("Low")}),(0,C.jsx)("div",{className:"".concat(g.priorityBubble," ").concat(g.medium," ").concat("Medium"===i.cardPriority?g.selected:""),onClick:()=>u("Medium")}),(0,C.jsx)("div",{className:"".concat(g.priorityBubble," ").concat(g.high," ").concat("High"===i.cardPriority?g.selected:""),onClick:()=>u("High")}),(0,C.jsx)("div",{className:"".concat(g.priorityBubble," ").concat(g.without," ").concat("Without"===i.cardPriority?g.selected:""),onClick:()=>u("Without")})]})]}),(0,C.jsxs)("div",{className:g.deadlineContainer,children:[(0,C.jsx)("label",{className:g.label,children:"Deadline"}),(0,C.jsxs)("div",{className:g.dateContainer,children:[(0,C.jsx)("input",{type:"text",value:i.deadlineDate?new Date(i.deadlineDate).toLocaleDateString("en-US",{month:"long",day:"numeric"}):"Today, "+(new Date).toLocaleDateString("en-US",{month:"long",day:"numeric"}),readOnly:!0,className:g.dateInput}),(0,C.jsxs)("div",{style:{position:"relative"},children:[" ",(0,C.jsx)(A.bv7,{className:g.arrowIcon,onClick:()=>l(!0)}),s&&(0,C.jsxs)("div",{className:"datePickerContainer",children:[" ",(0,C.jsx)(D(),{selected:i.deadlineDate?new Date(i.deadlineDate):new Date,onChange:e=>{d((a=>(0,v.A)((0,v.A)({},a),{},{deadlineDate:e}))),l(!1)},minDate:new Date,dateFormat:"MMMM d, yyyy",className:g.reactDatePicker,todayButton:"Today",inline:!0})]})]})]})]}),(0,C.jsx)("div",{children:(0,C.jsxs)(y.A,{type:"submit",extraClass:g.button,children:[(0,C.jsx)("div",{className:g.iconContainer,children:(0,C.jsx)(_.A,{name:r?"edit":"plus",size:14,extraClass:g.icon})}),r?"Edit":"Add"]})})]})};var F=n(9375);const f={title:"AddColumnForm_title__05V3n",button:"AddColumnForm_button__yMLFf",iconContainer:"AddColumnForm_iconContainer__TBlfJ",icon:"AddColumnForm_icon__0BxgM"};const P=function(e){let{handleModalClose:a,column:n=null}=e;const{id:d}=(0,o.g)(),s=(0,r.wA)(),[l,c]=(0,t.useState)(""),[u,m]=(0,t.useState)(null);return(0,t.useEffect)((()=>{n&&c(n.columnName||"")}),[n]),(0,C.jsxs)("div",{className:f.container,children:[(0,C.jsx)("h2",{className:f.title,children:n?"Edit Column":"Add Column"}),(0,C.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(null);try{if(n){const e=n._id,o=await s(s((0,i.ZD)({columnId:e,updateData:{columnName:l}})));var t;if(i.ZD.rejected.match(o))m((null===(t=o.payload)||void 0===t?void 0:t.message)||"Failed to edit column.");else s((0,i.GH)(d)),a()}else{const e=await s((0,i.cq)({columnName:l,projectId:d}));var o;if(i.cq.rejected.match(e))m((null===(o=e.payload)||void 0===o?void 0:o.message)||"Failed to add column.");else s((0,i.GH)(d)),a()}}catch(r){m("An unexpected error occurred.")}},children:[(0,C.jsx)(N.A,{placeholder:"Title",value:l,handleChange:e=>{c(e.target.value)}}),u&&(0,C.jsx)("p",{className:f.error,children:u}),(0,C.jsxs)(y.A,{extraClass:f.button,type:"submit",children:[(0,C.jsx)("div",{className:f.iconContainer,children:(0,C.jsx)(_.A,{name:n?"edit":"plus",size:16,extraClass:f.icon})}),n?"Save Changes":"Add"]})]})]})},S="DeleteModa_buttons__Sn7Gc",k="DeleteModa_text__7JuEP",M="DeleteModa_modalContent__SwsBl",I="DeleteModa_title__g7djc";const E=function(e){let{title:a,message:n,onConfirm:t,handleModalClose:o}=e;return(0,C.jsxs)("div",{className:M,children:[(0,C.jsx)("h3",{className:I,children:a||"Confirm Action"}),(0,C.jsx)("p",{className:k,children:n||"Are you sure you want to proceed?"}),(0,C.jsxs)("div",{className:S,children:[(0,C.jsx)(y.A,{onClick:async()=>{try{await t(),o()}catch(e){console.error("Error in DeleteModal:",e)}},children:"Yes"}),(0,C.jsx)(y.A,{onClick:o,children:"No"})]})]})},z=e=>{let{column:a}=e;const n=(0,r.wA)(),o=(0,r.d4)((e=>((e,a)=>(e.cards.columns[a]||[]).map((a=>e.cards.cards[a])))(e,a._id))),[d,s]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),m=e=>{s(e),c(!0)},h=()=>{s(null),c(!1)};return(0,t.useEffect)((()=>{n((0,u.Eg)(a._id))}),[n,a._id]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:p.container,children:[(0,C.jsxs)("div",{className:p.columnNameContainer,children:[(0,C.jsx)("h3",{className:p.name,children:a.name}),(0,C.jsxs)("div",{className:p.iconContainer,children:[(0,C.jsx)(_.A,{name:"edit",size:16,handlerFunction:()=>{m((0,C.jsx)(P,{handleModalClose:h,column:a}))}}),(0,C.jsx)(_.A,{name:"delete",size:16,handlerFunction:()=>{m((0,C.jsx)(E,{title:"Delete Column",message:"Are you sure you want to delete this column?",handleModalClose:h,onConfirm:()=>n((0,i.gR)(a._id)).unwrap().then((()=>console.log("Column deleted successfully"))).catch((e=>console.error("Failed to delete column:",e)))}))}})]})]}),(0,C.jsx)(j,{cards:o||[],onEdit:e=>{m((0,C.jsx)(w,{card:e,columnId:a._id,handleClose:h,onSubmit:t=>{n((0,u.Lo)({updatedData:t,columnId:a._id,cardId:e._id})).unwrap().then((()=>{console.log("Card edited successfully")})).catch((e=>{console.error("Failed to edit card:",e)}))}}))},onDelete:e=>{(e=>{const t=a._id;m((0,C.jsx)(E,{title:"Delete Card",message:"Are you sure you want to delete this card?",handleModalClose:h,onConfirm:()=>n((0,u.GO)({columnId:t,cardId:e})).unwrap().then((()=>console.log("Card deleted successfully"))).catch((e=>console.error("Failed to delete card:",e)))}))})(e)},onMove:(e,a)=>{}}),(0,C.jsxs)("div",{className:p.addContainer,children:[(0,C.jsx)(y.A,{extraClass:p.button,handlerFunction:()=>{m((0,C.jsx)(w,{columnId:a._id,handleClose:h,onSubmit:e=>{n((0,u.gm)({cardData:e,columnId:a._id})).unwrap().then((e=>{console.log("Card added successfully:",e),n((0,u.Eg)(a._id))})).catch((e=>{console.error("Failed to add card:",e)}))}}))},children:(0,C.jsx)("div",{className:p.addIconContainer,children:(0,C.jsx)(_.A,{name:"plus",size:14,extraClass:p.icon})})}),(0,C.jsx)("p",{className:p.text,children:"Add another card"})]})]}),(0,C.jsx)(F.A,{isVisible:l,handleModalClose:h,extraClass:p.modal,children:d})]})};var B=n(2878);const L=function(){const{id:e}=(0,o.g)(),a=(0,r.wA)(),n=(0,r.d4)(d),u=(0,r.d4)(s),m=(0,r.d4)(l),[h,x]=(0,t.useState)(null),[j,p]=(0,t.useState)(!1),v=()=>{x(null),p(!1)};return(0,t.useEffect)((()=>{a((0,B.s)()),e&&a((0,i.GH)(e))}),[a,e]),u?(0,C.jsx)("p",{children:"Loading columns..."}):m?(0,C.jsxs)("p",{children:["Error loading columns: ",m]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:c.column,children:[n.map((e=>(0,C.jsx)(z,{column:e},e._id))),(0,C.jsxs)("div",{className:c.addContainer,children:[(0,C.jsx)(y.A,{extraClass:c.button,handlerFunction:()=>{x((0,C.jsx)(P,{handleModalClose:v})),p(!0)},children:(0,C.jsx)(_.A,{name:"plus",size:14,extraClass:c.icon})}),(0,C.jsx)("p",{className:c.text,children:" Add another column"})]})]}),(0,C.jsx)(F.A,{isVisible:j,handleModalClose:v,extraClass:c.modal,children:h})]})},G="ProjectDetailsPage_title__YoI9W",T="ProjectDetailsPage_container__O-8Ad";var H=n(4333);const O=function(){const{id:e}=(0,o.g)(),a=(0,r.d4)((a=>(0,H.yN)(a,e))),n=null===a||void 0===a?void 0:a.find((a=>a._id===e)),t=null!==n&&void 0!==n&&n.background?"".concat("/taskpro-project","/backgroundsImg/").concat(n.background,".jpeg"):null;return(0,C.jsxs)("div",{style:{backgroundImage:t?"url(".concat(t,")"):"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",minHeight:"100%",transition:"background 0.3s ease"},className:T,children:[(0,C.jsx)("h2",{className:G,children:"Project Office"}),(0,C.jsx)(L,{projectId:e})]})}}}]);
//# sourceMappingURL=443.7137447e.chunk.js.map
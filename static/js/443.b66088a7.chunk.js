"use strict";(self.webpackChunktaskpro_project=self.webpackChunktaskpro_project||[]).push([[443],{5443:(e,a,n)=>{n.r(a),n.d(a,{default:()=>W});var t=n(5043),o=n(6580),r=n(3003),i=n(8369);const d=e=>e.columns.columns,s=e=>e.columns.isLoading,l=e=>e.columns.error,c={column:"ProjectColumns_column__+kO0U",text:"ProjectColumns_text__HvghR",addContainer:"ProjectColumns_addContainer__K3nzj",button:"ProjectColumns_button__LslHO",icon:"ProjectColumns_icon__9ARtZ"};var u=n(5737);const m=(0,n(2099).Mz)((e=>e.cards.cardsByColumn),((e,a)=>a),((e,a)=>e[a]||[])),_={cardContainer:"Card_cardContainer__s03Mx",highPriority:"Card_highPriority__V2BsM",mediumPriority:"Card_mediumPriority__PihMH",lowPriority:"Card_lowPriority__jrbRn",priorityCircle:"Card_priorityCircle__7zGsp",high:"Card_high__XfacI",medium:"Card_medium__ZzgRd",low:"Card_low__8GEiw",default:"Card_default__0k8bx",detailsContainer:"Card_detailsContainer__tQzlS",secondContainer:"Card_secondContainer__ziGdE",title:"Card_title__td8Dq",text:"Card_text__9eW7u",container:"Card_container__RZsSe",smallText:"Card_smallText__TsInM",priorityStatus:"Card_priorityStatus__dtwQX",priority:"Card_priority__oWu7w",status:"Card_status__HcXGC",icons:"Card_icons__wug2B"};var C=n(9830),h=n(579);const x=function(e){let{card:a,onEdit:n,onDelete:t,onMove:o}=e;const r="".concat(_.priorityCircle," ").concat(_[a.cardPriority.toLowerCase()]||_.default);return(0,h.jsxs)("div",{className:"".concat(_.cardContainer," ").concat(_["".concat(a.cardPriority.toLowerCase(),"Priority")]||""),children:[(0,h.jsxs)("div",{className:_.detailsContainer,children:[(0,h.jsx)("h4",{className:_.title,children:a.cardName}),(0,h.jsx)("p",{className:_.text,children:a.cardDescription})]}),(0,h.jsxs)("div",{className:_.container,children:[(0,h.jsxs)("div",{className:_.secondContainer,children:[(0,h.jsxs)("div",{className:_.priority,children:[(0,h.jsx)("p",{className:_.smallText,children:"Priority:"}),(0,h.jsxs)("div",{className:_.priorityStatus,children:[(0,h.jsx)("div",{className:r}),(0,h.jsx)("span",{className:_.status,children:a.cardPriority})]})]}),(0,h.jsxs)("div",{className:_.deadline,children:[(0,h.jsx)("p",{className:_.smallText,children:"Deadline:"}),(0,h.jsx)("p",{className:_.status,children:new Date(a.deadlineDate).toLocaleDateString()})]})]}),(0,h.jsxs)("div",{className:_.icons,children:[(0,h.jsx)(C.A,{name:"move",size:16,handlerFunction:()=>o(a)}),(0,h.jsx)(C.A,{name:"edit",size:16,handlerFunction:()=>n(a)}),(0,h.jsx)(C.A,{name:"delete",size:16,handlerFunction:()=>t(a)})]})]})]})},j="CardsList_container__tsRnB";const p=function(e){let{cards:a,onEdit:n,onDelete:t,onMove:o}=e;return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:j,children:a.map((e=>(0,h.jsx)(x,{card:e,onEdit:()=>n(e),onDelete:()=>t(e._id),onMove:o},e._id)))})})},v={columnNameContainer:"Column_columnNameContainer__xnkj1",name:"Column_name__n0Gkp",iconContainer:"Column_iconContainer__1iGIa",addContainer:"Column_addContainer__X9y6m",addIconContainer:"Column_addIconContainer__euYja",icon:"Column_icon__Ef0lm",text:"Column_text__rtuyU",button:"Column_button__OQwSW"};var y=n(9379),g=n(6),N=n(3902);const b={title:"CardForm_title__jQe7-",textarea:"CardForm_textarea__vJxPE",priorityContainer:"CardForm_priorityContainer__NlkH0",label:"CardForm_label__uiV3+",priorityOptions:"CardForm_priorityOptions__kFCgX",priorityBubble:"CardForm_priorityBubble__ZG62I",low:"CardForm_low__KYMIv",medium:"CardForm_medium__EPSVG",high:"CardForm_high__JTvQE",without:"CardForm_without__Nc1iU",selected:"CardForm_selected__mfe+4",dateContainer:"CardForm_dateContainer__93ji5",deadlineContainer:"CardForm_deadlineContainer__YW5xq",dateInput:"CardForm_dateInput__xnIdh",button:"CardForm_button__Knqxb",iconContainer:"CardForm_iconContainer__VWiX+",icon:"CardForm_icon__SSn4W",dateButton:"CardForm_dateButton__U1bnt",arrowIcon:"CardForm_arrowIcon__r1T6E"};var D=n(1899),A=n.n(D),w=n(3538);n(5015);const F=e=>{let{columnId:a,handleClose:n,onSubmit:o,card:r}=e;const[i,d]=(0,t.useState)({cardName:(null===r||void 0===r?void 0:r.cardName)||"",cardDescription:(null===r||void 0===r?void 0:r.cardDescription)||"",cardPriority:(null===r||void 0===r?void 0:r.cardPriority)||"Low",deadlineDate:(null===r||void 0===r?void 0:r.cardDeadline)||""}),[s,l]=(0,t.useState)(!1),c=e=>{const{name:a,value:n}=e.target;d((e=>(0,y.A)((0,y.A)({},e),{},{[a]:n})))},u=e=>{d((a=>(0,y.A)((0,y.A)({},a),{},{cardPriority:e})))};return(0,h.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r?console.log("Editing card:",i):console.log("Adding card:",i),o(i),n()},children:[(0,h.jsx)("h2",{className:b.title,children:r?"Edit Card":"Add Card"}),(0,h.jsx)(N.A,{type:"text",name:"cardName",placeholder:"Title",value:i.cardName,handleChange:c,required:!0}),(0,h.jsx)("textarea",{className:b.textarea,name:"cardDescription",placeholder:"Description",value:i.cardDescription,onChange:c,required:!0}),(0,h.jsxs)("div",{className:b.priorityContainer,children:[(0,h.jsx)("label",{className:b.label,children:"Label color"}),(0,h.jsxs)("div",{className:b.priorityOptions,children:[(0,h.jsx)("div",{className:"".concat(b.priorityBubble," ").concat(b.low," ").concat("Low"===i.cardPriority?b.selected:""),onClick:()=>u("Low")}),(0,h.jsx)("div",{className:"".concat(b.priorityBubble," ").concat(b.medium," ").concat("Medium"===i.cardPriority?b.selected:""),onClick:()=>u("Medium")}),(0,h.jsx)("div",{className:"".concat(b.priorityBubble," ").concat(b.high," ").concat("High"===i.cardPriority?b.selected:""),onClick:()=>u("High")}),(0,h.jsx)("div",{className:"".concat(b.priorityBubble," ").concat(b.without," ").concat("Without"===i.cardPriority?b.selected:""),onClick:()=>u("Without")})]})]}),(0,h.jsxs)("div",{className:b.deadlineContainer,children:[(0,h.jsx)("label",{className:b.label,children:"Deadline"}),(0,h.jsxs)("div",{className:b.dateContainer,children:[(0,h.jsx)("input",{type:"text",value:i.deadlineDate?new Date(i.deadlineDate).toLocaleDateString("en-US",{month:"long",day:"numeric"}):"Today, "+(new Date).toLocaleDateString("en-US",{month:"long",day:"numeric"}),readOnly:!0,className:b.dateInput}),(0,h.jsxs)("div",{style:{position:"relative"},children:[" ",(0,h.jsx)(w.bv7,{className:b.arrowIcon,onClick:()=>l(!0)}),s&&(0,h.jsxs)("div",{className:"datePickerContainer",children:[" ",(0,h.jsx)(A(),{selected:i.deadlineDate?new Date(i.deadlineDate):new Date,onChange:e=>{d((a=>(0,y.A)((0,y.A)({},a),{},{deadlineDate:e}))),l(!1)},minDate:new Date,dateFormat:"MMMM d, yyyy",className:b.reactDatePicker,todayButton:"Today",inline:!0})]})]})]})]}),(0,h.jsx)("div",{children:(0,h.jsxs)(g.A,{type:"submit",extraClass:b.button,children:[(0,h.jsx)("div",{className:b.iconContainer,children:(0,h.jsx)(C.A,{name:r?"edit":"plus",size:14,extraClass:b.icon})}),r?"Edit":"Add"]})})]})};var f=n(9375);const P={title:"AddColumnForm_title__05V3n",button:"AddColumnForm_button__yMLFf",iconContainer:"AddColumnForm_iconContainer__TBlfJ",icon:"AddColumnForm_icon__0BxgM"};const M=function(e){let{handleModalClose:a,column:n=null}=e;const{id:d}=(0,o.g)(),s=(0,r.wA)(),[l,c]=(0,t.useState)(""),[u,m]=(0,t.useState)(null);return(0,t.useEffect)((()=>{n&&c(n.columnName||"")}),[n]),(0,h.jsxs)("div",{className:P.container,children:[(0,h.jsx)("h2",{className:P.title,children:n?"Edit Column":"Add Column"}),(0,h.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(null);try{if(n){const e=n._id,o=await s(s((0,i.ZD)({columnId:e,updateData:{columnName:l}})));var t;if(i.ZD.rejected.match(o))m((null===(t=o.payload)||void 0===t?void 0:t.message)||"Failed to edit column.");else s((0,i.GH)(d)),a()}else{const e=await s((0,i.cq)({columnName:l,projectId:d}));var o;if(i.cq.rejected.match(e))m((null===(o=e.payload)||void 0===o?void 0:o.message)||"Failed to add column.");else s((0,i.GH)(d)),a()}}catch(r){m("An unexpected error occurred.")}},children:[(0,h.jsx)(N.A,{placeholder:"Title",value:l,handleChange:e=>{c(e.target.value)}}),u&&(0,h.jsx)("p",{className:P.error,children:u}),(0,h.jsxs)(g.A,{extraClass:P.button,type:"submit",children:[(0,h.jsx)("div",{className:P.iconContainer,children:(0,h.jsx)(C.A,{name:n?"edit":"plus",size:16,extraClass:P.icon})}),n?"Save Changes":"Add"]})]})]})},S="DeleteModa_buttons__Sn7Gc",k="DeleteModa_text__7JuEP",I="DeleteModa_modalContent__SwsBl",E="DeleteModa_title__g7djc";const z=function(e){let{title:a,message:n,onConfirm:t,handleModalClose:o}=e;return(0,h.jsxs)("div",{className:I,children:[(0,h.jsx)("h3",{className:E,children:a||"Confirm Action"}),(0,h.jsx)("p",{className:k,children:n||"Are you sure you want to proceed?"}),(0,h.jsxs)("div",{className:S,children:[(0,h.jsx)(g.A,{onClick:async()=>{try{await t(),o()}catch(e){console.error("Error in DeleteModal:",e)}},children:"Yes"}),(0,h.jsx)(g.A,{onClick:o,children:"No"})]})]})},B=e=>{let{column:a}=e;const n=(0,r.wA)(),o=(0,r.d4)((e=>(m(e,a._id),m(e,a._id))));console.log("cards",o);const[d,s]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),_=e=>{s(e),c(!0)},x=()=>{s(null),c(!1)};(0,t.useEffect)((()=>{n((0,u.Eg)(a._id))}),[n]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:v.container,children:[(0,h.jsxs)("div",{className:v.columnNameContainer,children:[(0,h.jsx)("h3",{className:v.name,children:a.name}),(0,h.jsxs)("div",{className:v.iconContainer,children:[(0,h.jsx)(C.A,{name:"edit",size:16,handlerFunction:()=>{_((0,h.jsx)(M,{handleModalClose:x,column:a}))}}),(0,h.jsx)(C.A,{name:"delete",size:16,handlerFunction:()=>{_((0,h.jsx)(z,{title:"Delete Column",message:"Are you sure you want to delete this column?",handleModalClose:x,onConfirm:()=>n((0,i.gR)(a._id)).unwrap().then((()=>console.log("Column deleted successfully"))).catch((e=>console.error("Failed to delete column:",e)))}))}})]})]}),(0,h.jsx)(p,{cards:o.data||[],onEdit:e=>{_((0,h.jsx)(F,{card:e,columnId:a._id,handleClose:x,onSubmit:t=>{n((0,u.Lo)({updatedData:t,columnId:a._id,cardId:e._id})).unwrap().then((()=>{console.log("Card edited successfully")})).catch((e=>{console.error("Failed to edit card:",e)}))}}))},onDelete:e=>{(e=>{const t=a._id;_((0,h.jsx)(z,{title:"Delete Card",message:"Are you sure you want to delete this card?",handleModalClose:x,onConfirm:()=>n((0,u.GO)(t,e)).unwrap().then((()=>console.log("Card deleted successfully"))).catch((e=>console.error("Failed to delete card:",e)))}))})(e)},onMove:(e,a)=>{}}),(0,h.jsxs)("div",{className:v.addContainer,children:[(0,h.jsx)(g.A,{extraClass:v.button,handlerFunction:()=>{_((0,h.jsx)(F,{columnId:a._id,handleClose:x,onSubmit:e=>{n((0,u.gm)({cardData:e,columnId:a._id})).unwrap().then((e=>{console.log("Card added successfully:",e),n((0,u.Eg)(a._id))})).catch((e=>{console.error("Failed to add card:",e)}))}}))},children:(0,h.jsx)("div",{className:v.addIconContainer,children:(0,h.jsx)(C.A,{name:"plus",size:14,extraClass:v.icon})})}),(0,h.jsx)("p",{className:v.text,children:"Add another card"})]})]}),(0,h.jsx)(f.A,{isVisible:l,handleModalClose:x,extraClass:v.modal,children:d})]})};var L=n(2878);const G=function(){const{id:e}=(0,o.g)(),a=(0,r.wA)(),n=(0,r.d4)(d),u=(0,r.d4)(s),m=(0,r.d4)(l),[_,x]=(0,t.useState)(null),[j,p]=(0,t.useState)(!1),v=()=>{x(null),p(!1)};return(0,t.useEffect)((()=>{a((0,L.s)()),e&&a((0,i.GH)(e))}),[a,e]),u?(0,h.jsx)("p",{children:"Loading columns..."}):m?(0,h.jsxs)("p",{children:["Error loading columns: ",m]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:c.column,children:[n.map((e=>(0,h.jsx)(B,{column:e},e._id))),(0,h.jsxs)("div",{className:c.addContainer,children:[(0,h.jsx)(g.A,{extraClass:c.button,handlerFunction:()=>{x((0,h.jsx)(M,{handleModalClose:v})),p(!0)},children:(0,h.jsx)(C.A,{name:"plus",size:14,extraClass:c.icon})}),(0,h.jsx)("p",{className:c.text,children:" Add another column"})]})]}),(0,h.jsx)(f.A,{isVisible:j,handleModalClose:v,extraClass:c.modal,children:_})]})},T="ProjectDetailsPage_title__YoI9W",H="ProjectDetailsPage_container__O-8Ad";var O=n(4333);n(3769);const W=function(){const{id:e}=(0,o.g)(),a=(0,r.d4)((a=>(0,O.yN)(a,e))),n=null===a||void 0===a?void 0:a.find((a=>a._id===e)),t=null!==n&&void 0!==n&&n.background?"".concat("/taskpro-project","/backgroundsImg/").concat(n.background,".jpeg"):null;return(0,h.jsxs)("div",{style:{backgroundImage:t?"url(".concat(t,")"):"none",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",minHeight:"100%",transition:"background 0.3s ease"},className:H,children:[(0,h.jsx)("h2",{className:T,children:"Project Office"}),(0,h.jsx)(G,{projectId:e})]})}}}]);
//# sourceMappingURL=443.b66088a7.chunk.js.map